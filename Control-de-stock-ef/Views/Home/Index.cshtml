@model _ProveedorProductoViewModel
@{
    ViewData["Title"] = "Home Page";
    //calculo de total de articulos en stock
    var cantidad = 0;
    @foreach (var item in Model.Productos) 
    {
        cantidad += item.StockActual;
    }
    //calculo de productos con stock bajo
    //es decir, productos cuyo stock actual es menor o igual al stock minimo
    var ProductosStockBajo = 0;
    @foreach (var item in Model.Productos) 
    {
        if (item.StockActual <= item.StockMinimo)
        {
            ProductosStockBajo += 1;
        }
    }
    var ProveedoresActivos = 0;
    @foreach (var item in Model.Proveedores) 
    {
        ProveedoresActivos += 1;
    }
}

<main class="">
    <!-- Page Header -->
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Dashboard de inventario</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
            <button class="btn btn-sm btn-outline-primary me-2" type="button">
                <i class="bi bi-download me-1"></i> Exportar reporte
            </button>
            <a class="btn btn-sm btn-primary" asp-controller="Productos" asp-action="Index" >
                <i class="bi bi-plus-lg me-1"></i> Añadir al inventario
            </a>
        </div>
    </div>
    <!-- BEGIN: SummaryWidgets -->
    <div class="row g-3 mb-4" data-purpose="dashboard-widgets">
        <!-- Total Products Card -->
        <div class="col-12 col-sm-6 col-lg-4">
            <div class="card card-widget border-0 shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="text-muted mb-1 fw-medium">Total Stock Productos</p>
                            <h2 class="fw-bold mb-0">@cantidad</h2>
                        </div>
                        <div class="bg-primary bg-opacity-10 p-2 rounded">
                            <i class="bi bi-box-seam text-primary fs-4"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Low Stock Alert Card -->
        <div class="col-12 col-sm-6 col-lg-4">
            <div class="card card-widget low-stock-alert shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="text-muted mb-1 fw-medium">Alerta de stock bajo</p>
                            <h2 class="fw-bold mb-0 text-danger">@ProductosStockBajo</h2>
                        </div>
                        <div class="bg-danger bg-opacity-10 p-2 rounded">
                            <i class="bi bi-exclamation-triangle text-danger fs-4"></i>
                        </div>
                    </div>
                    <div class="mt-3">
                        <span class="badge bg-danger">Requieren atención</span>
                    </div>
                </div>
            </div>
        </div>
        <!-- Active Suppliers Card -->
        <div class="col-12 col-sm-12 col-lg-4">
            <div class="card card-widget border-0 shadow-sm h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="text-muted mb-1 fw-medium">Proveedores Activos</p>
                            <h2 class="fw-bold mb-0">@ProveedoresActivos</h2>
                        </div>
                        <div class="bg-success bg-opacity-10 p-2 rounded">
                            <i class="bi bi-truck text-success fs-4"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- END: SummaryWidgets -->
    <!-- BEGIN: RecentMovements -->
    <div class="row" data-purpose="recent-movements-section">
        <div class="col-12">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-white border-bottom py-3">
                    <h5 class="card-title mb-0 fw-bold">Movimientos recientes</h5>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle mb-0">
                            <thead class="bg-light">
                                <tr>
                                    <th class="px-4">Productos</th>
                                    <th>Categoria</th>
                                    <th>Acción</th>
                                    <th>Cantidad</th>
                                    <th class="text-end px-4">Fecha</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Item 1 -->
                                <tr>
                                    <td class="px-4 fw-medium">MacBook Pro M2 14"</td>
                                    <td>Electronics</td>
                                    <td><span class="status-dot bg-success"></span> Restock</td>
                                    <td class="text-success fw-bold">+10</td>
                                    <td class="text-end px-4 text-muted small">Today, 10:45 AM</td>
                                </tr>
                                <!-- Item 2 -->
                                <tr>
                                    <td class="px-4 fw-medium">Ergonomic Office Chair</td>
                                    <td>Furniture</td>
                                    <td><span class="status-dot bg-warning"></span> Sale</td>
                                    <td class="text-danger fw-bold">-2</td>
                                    <td class="text-end px-4 text-muted small">Today, 09:12 AM</td>
                                </tr>
                                <!-- Item 3 -->
                                <tr>
                                    <td class="px-4 fw-medium">Wireless Mouse</td>
                                    <td>Accessories</td>
                                    <td><span class="status-dot bg-danger"></span> Adjust</td>
                                    <td class="text-danger fw-bold">-5</td>
                                    <td class="text-end px-4 text-muted small">Yesterday, 4:20 PM</td>
                                </tr>
                                <!-- Item 4 -->
                                <tr>
                                    <td class="px-4 fw-medium">USB-C Hub 7-in-1</td>
                                    <td>Electronics</td>
                                    <td><span class="status-dot bg-success"></span> Restock</td>
                                    <td class="text-success fw-bold">+50</td>
                                    <td class="text-end px-4 text-muted small">Yesterday, 11:30 AM</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="card-footer bg-white border-top text-center py-3">
                    <a class="text-decoration-none small fw-bold" href="#">View All Movements</a>
                </div>
            </div>
        </div>
    </div>
    <!-- END: RecentMovements -->
</main>